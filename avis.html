<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Avis Clients - Le Numérique pour Tous</title>
  <style>
    body {
      margin: 0;
      font-family: 'Arial', sans-serif;
      background: linear-gradient(to right, #6a11cb, #2575fc);
      color: #fff;
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    h1 {
      margin-top: 30px;
    }

    .note-moyenne {
      font-size: 1.5em;
      margin: 10px 0;
    }

    .avis-container {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      padding: 20px;
      max-width: 1200px;
    }

    .avis {
      background-color: rgba(255, 255, 255, 0.1);
      border-radius: 10px;
      margin: 15px;
      padding: 20px;
      width: 250px;
      text-align: center;
      box-shadow: 0 4px 6px rgba(0,0,0,0.2);
      transition: transform 0.3s;
    }

    .avis:hover {
      transform: translateY(-5px);
    }

    .avis img {
      border-radius: 50%;
      width: 80px;
      height: 80px;
      object-fit: cover;
    }

    .stars {
      margin-top: 5px;
      display: inline-block;
    }

    .star {
      display: inline-block;
      width: 20px;
      height: 20px;
      background: lightgray;
      clip-path: polygon(
        50% 0%,
        61% 35%,
        98% 35%,
        68% 57%,
        79% 91%,
        50% 70%,
        21% 91%,
        32% 57%,
        2% 35%,
        39% 35%
      );
      margin: 0 1px;
    }

    .star.filled {
      background: gold;
    }

    .star.half {
      background: linear-gradient(to right, gold 50%, lightgray 50%);
    }

    .bouton-ajouter {
      background-color: #fff;
      color: #2575fc;
      border: none;
      padding: 10px 20px;
      font-weight: bold;
      border-radius: 5px;
      cursor: pointer;
      margin: 20px 0;
    }

    .modal {
      display: none;
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background-color: rgba(0,0,0,0.5);
      justify-content: center;
      align-items: center;
      z-index: 1000;
    }

    .modal-content {
      background-color: white;
      color: black;
      padding: 30px;
      border-radius: 10px;
      width: 90%;
      max-width: 500px;
      text-align: center;
    }

    .modal-content input, .modal-content textarea {
      width: 100%;
      padding: 10px;
      margin: 10px 0;
      border-radius: 5px;
      border: 1px solid #ccc;
    }

    .modal-content button {
      background-color: #2575fc;
      color: white;
      border: none;
      padding: 10px 15px;
      border-radius: 5px;
      cursor: pointer;
    }

    .confirmation {
      display: none;
      color: green;
      margin-top: 10px;
    }
  </style>
</head>
<body>
  <h1>Avis Clients</h1>
  <div class="note-moyenne" id="noteMoyenne">Note moyenne : ⭐⭐⭐⭐⭐</div>

  <div class="avis-container">
    <div class="avis" data-note="5">
      <img src="https://randomuser.me/api/portraits/men/1.jpg" alt="Jean">
      <p><strong>Jean</strong></p>
      <p>Très pédagogue et patient, je recommande vivement !</p>
      <div class="stars"></div>
    </div>
    <div class="avis" data-note="4.5">
      <img src="https://randomuser.me/api/portraits/women/2.jpg" alt="Marie">
      <p><strong>Marie</strong></p>
      <p>Grâce à lui, je suis maintenant à l’aise avec mon smartphone !</p>
      <div class="stars"></div>
    </div>
    <div class="avis" data-note="5">
      <img src="https://randomuser.me/api/portraits/men/3.jpg" alt="Paul">
      <p><strong>Paul</strong></p>
      <p>Un service au top, très clair et efficace.</p>
      <div class="stars"></div>
    </div>
    <div class="avis" data-note="4.5">
      <img src="https://randomuser.me/api/portraits/women/4.jpg" alt="Claudine">
      <p><strong>Claudine</strong></p>
      <p>Très rassurant et disponible pour toutes mes questions.</p>
      <div class="stars"></div>
    </div>
    <div class="avis" data-note="5">
      <img src="https://randomuser.me/api/portraits/men/5.jpg" alt="Michel">
      <p><strong>Michel</strong></p>
      <p>Explication claire, je recommande sans hésiter.</p>
      <div class="stars"></div>
    </div>
    <div class="avis" data-note="5">
      <img src="https://randomuser.me/api/portraits/women/6.jpg" alt="Sophie">
      <p><strong>Sophie</strong></p>
      <p>Merci pour votre patience et votre gentillesse !</p>
      <div class="stars"></div>
    </div>
    <div class="avis" data-note="4.5">
      <img src="https://randomuser.me/api/portraits/men/7.jpg" alt="Bernard">
      <p><strong>Bernard</strong></p>
      <p>J’ai appris à utiliser mes mails et mon ordinateur en toute autonomie.</p>
      <div class="stars"></div>
    </div>
    <div class="avis" data-note="5">
      <img src="https://randomuser.me/api/portraits/women/8.jpg" alt="Lucie">
      <p><strong>Lucie</strong></p>
      <p>Très bon contact, je suis ravie de ses services.</p>
      <div class="stars"></div>
    </div>
  </div>

  <button class="bouton-ajouter" id="ouvrirModal">Ajouter un avis</button>

  <div class="modal" id="modalAvis">
    <div class="modal-content">
      <h2>Ajouter votre avis</h2>
      <form action="https://formsubmit.co/ton@email.com" method="POST">
        <input type="hidden" name="_next" value="https://votresite.com/merci.html" />
        <input type="text" name="nom" placeholder="Votre prénom" required />
        <textarea name="avis" rows="4" placeholder="Votre témoignage" required></textarea>
        <input type="number" name="note" placeholder="Note sur 5 (ex: 4.5)" step="0.5" min="1" max="5" required />
        <button type="submit">Envoyer</button>
      </form>
      <p class="confirmation" id="confirmationMessage">Merci pour votre avis !</p>
    </div>
  </div>

  <script>
    // Génère les étoiles de chaque avis
    document.querySelectorAll(".avis").forEach(avis => {
      const note = parseFloat(avis.dataset.note);
      const starsDiv = avis.querySelector(".stars");
      starsDiv.innerHTML = "";
      for (let i = 1; i <= 5; i++) {
        const star = document.createElement("span");
        star.classList.add("star");
        if (i <= Math.floor(note)) {
          star.classList.add("filled");
        } else if (i - note <= 0.5) {
          star.classList.add("half");
        }
        starsDiv.appendChild(star);
      }
    });

    // Affiche la note moyenne
    const notes = Array.from(document.querySelectorAll(".avis")).map(avis =>
      parseFloat(avis.dataset.note)
    );
    const moyenne = notes.reduce((a, b) => a + b, 0) / notes.length;
    const etoiles = Math.round(moyenne * 2) / 2;

    const moyenneDiv = document.getElementById("noteMoyenne");
    moyenneDiv.textContent = `Note moyenne : ${"⭐".repeat(Math.floor(etoiles))}${etoiles % 1 ? "⭐½" : ""}`;

    // Gestion modale
    const modal = document.getElementById("modalAvis");
    document.getElementById("ouvrirModal").addEventListener("click", () => {
      modal.style.display = "flex";
    });

    window.addEventListener("click", e => {
      if (e.target == modal) {
        modal.style.display = "none";
      }
    });
  </script>
</body>
</html>
